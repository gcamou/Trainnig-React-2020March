{"ast":null,"code":"import { useReducer, useCallback } from 'react';\n\nconst httpReducer = (currentHttpState, action) => {\n  switch (action.type) {\n    case 'SEND':\n      return {\n        isLoading: true,\n        error: null,\n        data: null,\n        extra: null,\n        identified: action.identified\n      };\n\n    case 'RESPONSE':\n      return { ...currentHttpState,\n        isLoading: false,\n        data: action.responseData,\n        extra: action.extra\n      };\n\n    case 'ERROR':\n      return {\n        isLoading: false,\n        error: action.error\n      };\n\n    case 'CLEAR':\n      return { ...currentHttpState,\n        error: null\n      };\n\n    default:\n      throw new Error('Something was wrong!');\n  }\n};\n\nconst useHttp = () => {\n  const [userHttpState, dispatchHttp] = useReducer(httpReducer, {\n    isLoading: false,\n    error: null,\n    data: null,\n    extra: null,\n    identified: null\n  });\n  const sendRequest = useCallback((url, method, body, reqExtra, reqIdentified) => {\n    dispatchHttp({\n      type: 'SEND',\n      identified: reqIdentified\n    });\n    fetch(url, {\n      method: method,\n      body: body,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(responseData => {\n      return dispatchHttp({\n        type: 'RESPONSE',\n        responseData: responseData,\n        extra: reqExtra\n      });\n    }).catch(err => {\n      // setError('Something was wrong!');\n      // setIsLoading(false);\n      dispatchHttp({\n        type: 'ERROR',\n        error: err\n      });\n    });\n  }, []);\n  return {\n    isLoading: userHttpState.isLoading,\n    error: userHttpState.error,\n    data: userHttpState.data,\n    sendRequest: sendRequest,\n    extra: userHttpState.extra,\n    identified: userHttpState.identified\n  };\n};\n\nexport default useHttp;","map":{"version":3,"sources":["/Volumes/gCamouInc/Dev/Projects/Trainning/React/react-hook/src/hooks/http.js"],"names":["useReducer","useCallback","httpReducer","currentHttpState","action","type","isLoading","error","data","extra","identified","responseData","Error","useHttp","userHttpState","dispatchHttp","sendRequest","url","method","body","reqExtra","reqIdentified","fetch","headers","then","response","json","catch","err"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,WAArB,QAAwC,OAAxC;;AAEA,MAAMC,WAAW,GAAG,CAACC,gBAAD,EAAmBC,MAAnB,KAA8B;AAC9C,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,MAAL;AACI,aAAO;AAAEC,QAAAA,SAAS,EAAE,IAAb;AAAmBC,QAAAA,KAAK,EAAE,IAA1B;AAAgCC,QAAAA,IAAI,EAAE,IAAtC;AAA4CC,QAAAA,KAAK,EAAE,IAAnD;AAAyDC,QAAAA,UAAU,EAAEN,MAAM,CAACM;AAA5E,OAAP;;AACJ,SAAK,UAAL;AACI,aAAO,EAAE,GAAGP,gBAAL;AAAuBG,QAAAA,SAAS,EAAE,KAAlC;AAAyCE,QAAAA,IAAI,EAAEJ,MAAM,CAACO,YAAtD;AAAoEF,QAAAA,KAAK,EAAEL,MAAM,CAACK;AAAlF,OAAP;;AACJ,SAAK,OAAL;AACI,aAAO;AAAEH,QAAAA,SAAS,EAAE,KAAb;AAAoBC,QAAAA,KAAK,EAAEH,MAAM,CAACG;AAAlC,OAAP;;AACJ,SAAK,OAAL;AACI,aAAO,EAAE,GAAGJ,gBAAL;AAAuBI,QAAAA,KAAK,EAAE;AAA9B,OAAP;;AACJ;AACI,YAAM,IAAIK,KAAJ,CAAU,sBAAV,CAAN;AAVR;AAYH,CAbD;;AAeA,MAAMC,OAAO,GAAG,MAAM;AAClB,QAAM,CAACC,aAAD,EAAgBC,YAAhB,IAAgCf,UAAU,CAACE,WAAD,EAC5C;AACII,IAAAA,SAAS,EAAE,KADf;AAEIC,IAAAA,KAAK,EAAE,IAFX;AAGIC,IAAAA,IAAI,EAAE,IAHV;AAIIC,IAAAA,KAAK,EAAE,IAJX;AAKIC,IAAAA,UAAU,EAAE;AALhB,GAD4C,CAAhD;AASA,QAAMM,WAAW,GAAGf,WAAW,CAAC,CAACgB,GAAD,EAAMC,MAAN,EAAcC,IAAd,EAAoBC,QAApB,EAA8BC,aAA9B,KAAgD;AAC5EN,IAAAA,YAAY,CAAC;AAAEV,MAAAA,IAAI,EAAE,MAAR;AAAgBK,MAAAA,UAAU,EAAEW;AAA5B,KAAD,CAAZ;AACAC,IAAAA,KAAK,CACDL,GADC,EACI;AACLC,MAAAA,MAAM,EAAEA,MADH;AAELC,MAAAA,IAAI,EAAEA,IAFD;AAGLI,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAHJ,KADJ,CAAL,CAKGC,IALH,CAKQC,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAPD,EAOGF,IAPH,CAOQb,YAAY,IAAI;AACpB,aAAOI,YAAY,CAAC;AAAEV,QAAAA,IAAI,EAAE,UAAR;AAAoBM,QAAAA,YAAY,EAAEA,YAAlC;AAAgDF,QAAAA,KAAK,EAAEW;AAAvD,OAAD,CAAnB;AACH,KATD,EASGO,KATH,CASSC,GAAG,IAAI;AACZ;AACA;AACAb,MAAAA,YAAY,CAAC;AAAEV,QAAAA,IAAI,EAAE,OAAR;AAAiBE,QAAAA,KAAK,EAAEqB;AAAxB,OAAD,CAAZ;AACH,KAbD;AAcH,GAhB8B,EAgB5B,EAhB4B,CAA/B;AAkBA,SAAO;AACHtB,IAAAA,SAAS,EAAEQ,aAAa,CAACR,SADtB;AAEHC,IAAAA,KAAK,EAAEO,aAAa,CAACP,KAFlB;AAGHC,IAAAA,IAAI,EAAEM,aAAa,CAACN,IAHjB;AAIHQ,IAAAA,WAAW,EAAEA,WAJV;AAKHP,IAAAA,KAAK,EAAEK,aAAa,CAACL,KALlB;AAMHC,IAAAA,UAAU,EAAEI,aAAa,CAACJ;AANvB,GAAP;AAQH,CApCD;;AAsCA,eAAeG,OAAf","sourcesContent":["import { useReducer, useCallback } from 'react';\n\nconst httpReducer = (currentHttpState, action) => {\n    switch (action.type) {\n        case 'SEND':\n            return { isLoading: true, error: null, data: null, extra: null, identified: action.identified };\n        case 'RESPONSE':\n            return { ...currentHttpState, isLoading: false, data: action.responseData, extra: action.extra };\n        case 'ERROR':\n            return { isLoading: false, error: action.error };\n        case 'CLEAR':\n            return { ...currentHttpState, error: null };\n        default:\n            throw new Error('Something was wrong!');\n    }\n}\n\nconst useHttp = () => {\n    const [userHttpState, dispatchHttp] = useReducer(httpReducer,\n        {\n            isLoading: false,\n            error: null,\n            data: null,\n            extra: null,\n            identified: null\n        });\n\n    const sendRequest = useCallback((url, method, body, reqExtra, reqIdentified) => {\n        dispatchHttp({ type: 'SEND', identified: reqIdentified });\n        fetch(\n            url, {\n            method: method,\n            body: body,\n            headers: { 'Content-Type': 'application/json' }\n        }).then(response => {\n            return response.json();\n        }).then(responseData => {\n            return dispatchHttp({ type: 'RESPONSE', responseData: responseData, extra: reqExtra })\n        }).catch(err => {\n            // setError('Something was wrong!');\n            // setIsLoading(false);\n            dispatchHttp({ type: 'ERROR', error: err });\n        });\n    }, []);\n\n    return {\n        isLoading: userHttpState.isLoading,\n        error: userHttpState.error,\n        data: userHttpState.data,\n        sendRequest: sendRequest,\n        extra: userHttpState.extra,\n        identified: userHttpState.identified\n    }\n};\n\nexport default useHttp;"]},"metadata":{},"sourceType":"module"}