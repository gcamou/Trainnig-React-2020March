{"ast":null,"code":"import { useReducer, useCallback } from 'react';\n\nconst httpReducer = (currentHttpState, action) => {\n  switch (action.type) {\n    case 'SEND':\n      return {\n        isLoading: true,\n        error: null,\n        data: null,\n        extra: action.extra\n      };\n\n    case 'RESPONSE':\n      return { ...currentHttpState,\n        isLoading: false,\n        data: action.responseData\n      };\n\n    case 'ERROR':\n      return {\n        isLoading: false,\n        error: action.error\n      };\n\n    case 'CLEAR':\n      return { ...currentHttpState,\n        error: null\n      };\n\n    default:\n      throw new Error('Something was wrong!');\n  }\n};\n\nconst useHttp = () => {\n  const [userHttpState, dispatchHttp] = useReducer(httpReducer, {\n    isLoading: false,\n    error: null,\n    data: null,\n    extra: null\n  });\n  const sendRequest = useCallback((url, method, body, reqExtra) => {\n    dispatchHttp({\n      type: 'SEND',\n      extra: reqExtra\n    });\n    fetch(url, {\n      method: method,\n      body: body,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(responseData => {\n      return dispatchHttp({\n        type: 'RESPONSE',\n        responseData: responseData\n      });\n    }).catch(err => {\n      // setError('Something was wrong!');\n      // setIsLoading(false);\n      dispatchHttp({\n        type: 'ERROR',\n        error: err\n      });\n    });\n  }, []);\n  return {\n    isLoading: userHttpState.isLoading,\n    error: userHttpState.error,\n    data: userHttpState.data,\n    sendRequest: sendRequest,\n    extra: userHttpState.extra\n  };\n};\n\nexport default useHttp;","map":{"version":3,"sources":["/Volumes/gCamouInc/Dev/Projects/Trainning/React/react-hook/src/hooks/http.js"],"names":["useReducer","useCallback","httpReducer","currentHttpState","action","type","isLoading","error","data","extra","responseData","Error","useHttp","userHttpState","dispatchHttp","sendRequest","url","method","body","reqExtra","fetch","headers","then","response","json","catch","err"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,WAArB,QAAwC,OAAxC;;AAIA,MAAMC,WAAW,GAAG,CAACC,gBAAD,EAAmBC,MAAnB,KAA8B;AAC9C,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,MAAL;AACI,aAAO;AAAEC,QAAAA,SAAS,EAAE,IAAb;AAAmBC,QAAAA,KAAK,EAAE,IAA1B;AAAgCC,QAAAA,IAAI,EAAE,IAAtC;AAA4CC,QAAAA,KAAK,EAAEL,MAAM,CAACK;AAA1D,OAAP;;AACJ,SAAK,UAAL;AACI,aAAO,EAAE,GAAGN,gBAAL;AAAuBG,QAAAA,SAAS,EAAE,KAAlC;AAAyCE,QAAAA,IAAI,EAAEJ,MAAM,CAACM;AAAtD,OAAP;;AACJ,SAAK,OAAL;AACI,aAAO;AAAEJ,QAAAA,SAAS,EAAE,KAAb;AAAoBC,QAAAA,KAAK,EAAEH,MAAM,CAACG;AAAlC,OAAP;;AACJ,SAAK,OAAL;AACI,aAAO,EAAE,GAAGJ,gBAAL;AAAuBI,QAAAA,KAAK,EAAE;AAA9B,OAAP;;AACJ;AACI,YAAM,IAAII,KAAJ,CAAU,sBAAV,CAAN;AAVR;AAYH,CAbD;;AAeA,MAAMC,OAAO,GAAG,MAAM;AAClB,QAAM,CAACC,aAAD,EAAgBC,YAAhB,IAAgCd,UAAU,CAACE,WAAD,EAC5C;AACII,IAAAA,SAAS,EAAE,KADf;AAEIC,IAAAA,KAAK,EAAE,IAFX;AAGIC,IAAAA,IAAI,EAAE,IAHV;AAIIC,IAAAA,KAAK,EAAE;AAJX,GAD4C,CAAhD;AAQA,QAAMM,WAAW,GAAGd,WAAW,CAAC,CAACe,GAAD,EAAMC,MAAN,EAAcC,IAAd,EAAoBC,QAApB,KAAiC;AAC7DL,IAAAA,YAAY,CAAC;AAACT,MAAAA,IAAI,EAAE,MAAP;AAAeI,MAAAA,KAAK,EAAEU;AAAtB,KAAD,CAAZ;AACAC,IAAAA,KAAK,CACDJ,GADC,EACI;AACLC,MAAAA,MAAM,EAAEA,MADH;AAELC,MAAAA,IAAI,EAAEA,IAFD;AAGLG,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAHJ,KADJ,CAAL,CAKGC,IALH,CAKQC,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAPD,EAOGF,IAPH,CAOQZ,YAAY,IAAI;AACpB,aAAOI,YAAY,CAAC;AAAET,QAAAA,IAAI,EAAE,UAAR;AAAoBK,QAAAA,YAAY,EAAEA;AAAlC,OAAD,CAAnB;AACH,KATD,EASGe,KATH,CASSC,GAAG,IAAI;AACZ;AACA;AACAZ,MAAAA,YAAY,CAAC;AAAET,QAAAA,IAAI,EAAE,OAAR;AAAiBE,QAAAA,KAAK,EAAEmB;AAAxB,OAAD,CAAZ;AACH,KAbD;AAcH,GAhB8B,EAgB5B,EAhB4B,CAA/B;AAkBA,SAAO;AACHpB,IAAAA,SAAS,EAAEO,aAAa,CAACP,SADtB;AAEHC,IAAAA,KAAK,EAAEM,aAAa,CAACN,KAFlB;AAGHC,IAAAA,IAAI,EAAEK,aAAa,CAACL,IAHjB;AAIHO,IAAAA,WAAW,EAAEA,WAJV;AAKHN,IAAAA,KAAK,EAAEI,aAAa,CAACJ;AALlB,GAAP;AAOH,CAlCD;;AAoCA,eAAeG,OAAf","sourcesContent":["import { useReducer, useCallback } from 'react';\n\n\n\nconst httpReducer = (currentHttpState, action) => {\n    switch (action.type) {\n        case 'SEND':\n            return { isLoading: true, error: null, data: null, extra: action.extra };\n        case 'RESPONSE':\n            return { ...currentHttpState, isLoading: false, data: action.responseData };\n        case 'ERROR':\n            return { isLoading: false, error: action.error };\n        case 'CLEAR':\n            return { ...currentHttpState, error: null };\n        default:\n            throw new Error('Something was wrong!');\n    }\n}\n\nconst useHttp = () => {\n    const [userHttpState, dispatchHttp] = useReducer(httpReducer,\n        {\n            isLoading: false,\n            error: null,\n            data: null,\n            extra: null\n        });\n\n    const sendRequest = useCallback((url, method, body, reqExtra) => {\n        dispatchHttp({type: 'SEND', extra: reqExtra});\n        fetch(\n            url, {\n            method: method,\n            body: body,\n            headers: { 'Content-Type': 'application/json' }\n        }).then(response => {\n            return response.json();\n        }).then(responseData => {\n            return dispatchHttp({ type: 'RESPONSE', responseData: responseData })\n        }).catch(err => {\n            // setError('Something was wrong!');\n            // setIsLoading(false);\n            dispatchHttp({ type: 'ERROR', error: err });\n        });\n    }, []);\n\n    return {\n        isLoading: userHttpState.isLoading,\n        error: userHttpState.error,\n        data: userHttpState.data,\n        sendRequest: sendRequest,\n        extra: userHttpState.extra\n    }\n};\n\nexport default useHttp;"]},"metadata":{},"sourceType":"module"}